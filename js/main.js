//get datafunction get_data(clicked) {	var sy = null;	if(clicked !== undefined) {		var sy = clicked.cells[0].innerHTML;	}	var sel = document.getElementById("schId");	var index = sel.selectedIndex;	if(sel[index].value) { var schid=sel[index].value; }	var xmlhttp = new XMLHttpRequest();	xmlhttp.onreadystatechange = function() {		if (this.readyState == 4 && this.status == 200) {			var obj = JSON.parse(this.responseText);						console.log(obj);						var listSection = document.getElementById("list");			var detailSection = document.getElementById("detail");						var syData = Object.keys(obj)[0];						if(Object.keys(obj)[0] == "sy") {							//listSection.style.display = "none";				//detailSection.style.display = "block";							if(sy != obj["sy"][0]["sy"]) console.log("ERROR. Mismatched SYs!");								var rStus = obj["sy"]["rpt"];				var dStus = obj["sy"]["drop"];				var nStus = obj["sy"]["new"];								//alert(rStus.length + " " + dStus.length + " " + nStus.length);								var html = "";				var d = document.getElementById("rptList");				for(r=0, l=rStus.length; r<l; r++) {					html += rStus[r]["stuid"] + " " + rStus[r]["stuname"] + " grade " + rStus[r]["glvl"] + "<br />\n";				}				d.innerHTML = html;				var html = "";				var d = document.getElementById("dropList");				for(r=0, l=dStus.length; r<l; r++) {					html += dStus[r]["stuid"] + " " + dStus[r]["stuname"] + " grade " + dStus[r]["glvl"] + "<br />\n";				}				d.innerHTML = html;								var html = "";				var d = document.getElementById("newList");				for(r=0, l=nStus.length; r<l; r++) {					html += nStus[r]["stuid"] + " " + nStus[r]["stuname"] + " grade " + nStus[r]["glvl"] + "<br />\n";				}				d.innerHTML = html;								document.getElementById("detailSY").innerHTML = sy;				document.getElementById("rCount").innerHTML = rStus.length;				document.getElementById("dCount").innerHTML = dStus.length;				document.getElementById("nCount").innerHTML = nStus.length;								detailSection.style.display = "block";						} else {							detailSection.style.display = "none";				var sys = Object.keys(obj);				//get the rqListTable				var tbl = document.getElementById("listTable");				//the data field names are specified in a hidden caption of				//the rqListTable. Here we load them into 'col' variable.				var col = tbl.caption.innerText.trim().split(",");				// ADD JSON DATA TO THE TABLE AS ROWS.				var tmp = "location.href='?sy=";				for (var i = 0; i < sys.length; i++) {								//check if there is a row. if not, add it.					if(tbl.rows[i + 1] === undefined) {						var cln = tbl.rows[i].cloneNode(true);						tbl.appendChild(cln);					}					var tr = tbl.rows[i + 1];										//populate the cells of the row					for (var j = 0; j < col.length; j++) {						var num = obj[sys[i]][col[j]];						if(j > 4) {							num = (100 * num).toFixed(1) + "%";						}						tr.cells[j].innerHTML = num;					}										/* this is done by the backend. left code here for reference.					if(obj[sys[i]][col[1]] > 0) {						tr.cells[5].innerHTML = (obj[sys[i]][col[2]] / obj[sys[i]][col[1]]).toPrecision(3);						tr.cells[6].innerHTML = (obj[sys[i]][col[3]] / obj[sys[i]][col[1]]).toPrecision(3);						tr.cells[7].innerHTML = (obj[sys[i]][col[4]] / obj[sys[i]][col[1]]).toPrecision(3);					}					*/									//set the onclick and the cursor of this table row					tr.setAttribute('onclick', "get_data(this);")				}			}		}	};		var qItems = [];	if(schid) { qItems.push("schid=" + schid); }	if(sy) { qItems.push("sy=" + sy); }	var url = "backend.php";	if(schid || sy) { url += "?" + qItems.join("&"); }		xmlhttp.open("GET", url, true);	xmlhttp.send();}